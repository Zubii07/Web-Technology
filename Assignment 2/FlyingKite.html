<!DOCTYPE html>
<html>
<head>
  <title>Kite Flying</title>
</head>
<body 
  style="margin:0; height:100vh; background:rgb(157, 218, 244); display:flex; flex-direction:column; justify-content:center; align-items:center;"
>
 
  <div 
    id="container"
    style="position:relative; width:300px; height:500px; display:flex; flex-direction:column; align-items:center; justify-content:flex-end;"
  >

    <img 
      id="kite"
      src="fly.png"
      alt="Kite"
      style="position:absolute; left:50%; transform:translateX(-50%); bottom:0; width:120px; transition:box-shadow 0.2s;"
    />
   
    <div style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); display:flex; gap:20px;">
      <button 
        id="flyBtn"
        style="padding:10px 20px; font-size:16px; border:none; border-radius:6px; background:#ffec70; cursor:pointer;"
      >Fly</button>
      <button 
        id="downBtn"
        style="padding:10px 20px; font-size:16px; border:none; border-radius:6px; background:#ffec70; cursor:pointer;"
      >Down</button>
    </div>
  </div>

  <script>
 
  const kite = document.getElementById('kite');
  const flyBtn = document.getElementById('flyBtn');
  const downBtn = document.getElementById('downBtn');
  const container = document.getElementById('container');

  // Animation
  let animation = null;
  let position = 0; 
  let waveAngle = 0;
  let isFlying = false;
  const ground = 0;
  const topLimit = 380;
  const speed = 1.5; 
  const waveSpeed = 0.07; 
  const waveAmplitude = 60; 

  // Helper to set kite position
  function setKitePosition(pos, waveX = 0) {
    kite.style.bottom = pos + 'px';
    kite.style.left = `calc(50% + ${waveX}px)`;
  }

  // Animate kite flying (wavy motion)
  function flyKite() {
    if (animation || isFlying) return;
    isFlying = true;
    animation = requestAnimationFrame(function step() {
      if (position < topLimit) {
        position += speed;
      }
      waveAngle += waveSpeed;
      const waveX = Math.sin(waveAngle) * waveAmplitude;
      setKitePosition(position, waveX);
      animation = requestAnimationFrame(step);
    });
  }

  // Stop flying and bring kite down
  function downKite() {
    if (!isFlying) return;
    isFlying = false;
    if (animation) cancelAnimationFrame(animation);
    animation = requestAnimationFrame(function step() {
      if (position > ground) {
        position -= speed * 2; // faster down
        if (position < ground) position = ground;
        setKitePosition(position, 0); // no wave, center horizontally
        animation = requestAnimationFrame(step);
      } else {
        setKitePosition(ground, 0);
        animation = null;
      }
    });
  }

  
  flyBtn.onclick = function() {
    if (!isFlying) {
      flyKite();
    }
  };
  downBtn.onclick = function() {
    downKite();
  };


  setKitePosition(ground, 0);
</script>
</body>
</html>
